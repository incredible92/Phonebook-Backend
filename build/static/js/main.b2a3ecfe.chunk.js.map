{"version":3,"sources":["services/person.jsx","components/notification.jsx","components/filter.jsx","components/personForm.jsx","components/persons.jsx","App.js","index.js"],"names":["baseUrl","req","axios","get","console","log","then","response","data","object","post","id","put","delete","Notification","props","m","message","category","className","Filter","value","showResults","onChange","filterChange","PersonForm","onSubmit","addDetails","newName","handleChange","newNumber","handleNumberChange","type","Persons","filteredNames","persons","filter","person","name","toLowerCase","includes","map","number","onClick","deleteP","App","useState","setPersons","useEffect","personService","initPerson","setNewName","setNumber","setResults","errorMessage","setErrorMessage","event","target","preventDefault","findIndex","window","confirm","find","obj","newP","mess","setTimeout","newPers","catch","error","concat","p","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.b2a3ecfe.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nconst baseUrl = \"/http://localhost:3001/persons\";\r\n\r\nconst getAll = () => {\r\n  const req = axios.get(baseUrl);\r\n  console.log(req);\r\n  return req.then((response) => response.data);\r\n};\r\n\r\nconst create = (object) => {\r\n  const req = axios.post(baseUrl, object);\r\n  return req.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, object) => {\r\n  const req = axios.put(`${baseUrl}/${id}`, object);\r\n  return req.then((response) => response.data);\r\n};\r\n\r\nconst deletePerson = (id) => {\r\n  const req = axios.delete(`${baseUrl}/${id}`);\r\n  return req.then((response) => response.data);\r\n};\r\n\r\nexport default {\r\n  getAll: getAll,\r\n  create: create,\r\n  update: update,\r\n  deletePerson: deletePerson,\r\n};\r\n","import React from \"react\";\r\n\r\nconst Notification = (props) => {\r\n  if (props.m.message === null) {\r\n    return null;\r\n  }\r\n  if (props.m.category === \"success\") {\r\n    return <div className=\"success\">{props.m.message}</div>;\r\n  }\r\n  return <div className=\"error\">{props.m.message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React from \"react\";\r\n\r\nconst Filter = (props) => {\r\n  return (\r\n    <div>\r\n      filter shown with{\" \"}\r\n      <input value={props.showResults} onChange={props.filterChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst PersonForm = (props) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={props.addDetails}>\r\n        <div>\r\n          name: <input value={props.newName} onChange={props.handleChange} />{\" \"}\r\n          <br />\r\n          number:{\" \"}\r\n          <input value={props.newNumber} onChange={props.handleNumberChange} />\r\n        </div>\r\n\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = (props) => {\r\n  var filteredNames = props.persons;\r\n  if (props.showResults) {\r\n    filteredNames = props.persons.filter((person) =>\r\n      person.name.toLowerCase().includes(props.showResults.toLowerCase())\r\n    );\r\n  }\r\n  const disp = () =>\r\n    filteredNames.map((person) => (\r\n      <li key={person.name}>\r\n        {\" \"}\r\n        {person.name} {person.number}{\" \"}\r\n        <button onClick={() => props.deleteP(person.id)}>delete</button>\r\n      </li>\r\n    ));\r\n  return <ul>{disp()}</ul>;\r\n};\r\n\r\nexport default Persons;\r\n","import React, { useState, useEffect} from 'react';\r\nimport axios from 'axios'\r\nimport personService from './services/person.jsx';\r\nimport './index.css';\r\n\r\nimport Notification from './components/notification.jsx'\r\nimport Filter from './components/filter.jsx'\r\nimport PersonForm from './components/personForm.jsx'\r\nimport Persons from './components/persons.jsx'\r\n\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([])\r\n  useEffect(()=> {\r\n\t\tpersonService.getAll().then(initPerson => {\r\n\t\t\tsetPersons(initPerson)\r\n\t\t})\r\n  },[])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [newNumber, setNumber] = useState('')\r\n  const [showResults, setResults] = useState('')\r\n  const [errorMessage, setErrorMessage] = useState({\r\n\t  message: null,\r\n\t  category: null\r\n  })\r\n  \r\n  const addDetails = (event) => {\r\n\t  event.preventDefault()\r\n\t//   console.log(event.target)\r\n\t\r\n\t\t// console.log(persons[1]);\r\n\r\n\t\tif(persons.findIndex(person => person.name === newName) > -1 ){\r\n\t\t\tif(window.confirm(newName + ' is already added phonebook, replace the old number with new one?')){\r\n\t\t\t\tconst id = persons.find(person=>person.name===newName).id\r\n\t\t\t\tconst obj = {\r\n\t\t\t\t\tname: newName,\r\n\t\t\t\t\tnumber: newNumber,\r\n\t\t\t\t}\r\n\t\t\t\tpersonService\r\n\t\t\t\t.update(id, obj)\r\n\t\t\t\t.then(newP => {\r\n\t\t\t\t\tconst mess = {\r\n\t\t\t\t\t\tmessage: `Added ${newP.name}`,\r\n\t\t\t\t\t\tcategory: 'success'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetErrorMessage(mess)\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tsetErrorMessage({...errorMessage, message: null})\r\n\t\t\t\t\t}, 5000)\r\n\t\t\t\t\tconst newPers = persons.map(person=> person.id!==id ? person : newP)\r\n\t\t\t\t\tsetPersons(newPers)\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error=>{\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst mess = {\r\n\t\t\t\t\t\tmessage: `${obj.name} has already been removed from the database `,\r\n\t\t\t\t\t\tcategory: 'error'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetErrorMessage(mess)\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tsetErrorMessage({...errorMessage, message: null})\r\n\t\t\t\t\t}, 5000)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\tconst obj = {\r\n\t\t\t\tname: newName,\r\n\t\t\t\tnumber: newNumber\r\n\t\t\t}\r\n\t\t\t// console.log(persons)\r\n\t\t\t// console.log(obj)\t\r\n\t\t\tpersonService\r\n\t\t\t\t.create(obj)\r\n\t\t\t\t.then(newP => {\r\n\r\n\t\t\t\t\tconst mess = {\r\n\t\t\t\t\t\tmessage: `Added ${newP.name}`,\r\n\t\t\t\t\t\tcategory: 'success'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetErrorMessage(mess)\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tsetErrorMessage({...errorMessage, message: null})\r\n\t\t\t\t\t}, 5000)\r\n\t\t\t\t\tsetPersons(persons.concat(newP))\r\n\t\t\t\t\tsetNewName('')\r\n\t\t\t\t\tsetNumber('')\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error=>{\r\n\t\t\t\t\t// console.log(error.respon.data.error)\r\n\t\t\t\t\tconst mess = {\r\n\t\t\t\t\t\tmessage: error.response.data.error,\r\n\t\t\t\t\t\tcategory: 'error'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetErrorMessage(mess)\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tsetErrorMessage({...errorMessage, message: null})\r\n\t\t\t\t\t}, 5000)\r\n\t\t\t\t})\r\n\t\t\t\r\n\t\t}\r\n\t\r\n  }\r\n  const deletePersonHandler  = (id) => {\r\n\t\tconst p = persons.find( person => person.id === id)\r\n\t\tif(window.confirm(`Delete ${p.name} ?`)){\r\n\t\t\tpersonService\r\n\t\t\t\t.deletePerson(id)\r\n\t\t\t\t.then(response => {\r\n\t\t\t\t\tsetPersons(persons.filter(person=>person.id!==id))\r\n\t\t\t\t})\r\n\t\t}\r\n  }\r\n\r\n  const handleChange = (event) => {\r\n    //   console.log(event.target.value)\r\n      setNewName(event.target.value)\r\n    }\r\n    const handleNumberChange = (event) => {\r\n    //   console.log(event.target.value)\r\n      setNumber(event.target.value)\r\n    }\r\n\r\n  \r\n  const filterChange = (event) => {\r\n\t  setResults(event.target.value)\r\n  }\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification m={errorMessage} />\r\n      <Filter showResults={showResults} filterChange={filterChange} />\r\n      <h2>Add new</h2>\r\n      <PersonForm addDetails={addDetails} newName={newName} handleChange={handleChange} newNumber={newNumber} handleNumberChange={handleNumberChange}/>\r\n    <h2>Number</h2>\r\n    <Persons persons={persons} showResults={showResults} deleteP={deletePersonHandler}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}