(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{40:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t(1),r=t.n(a),s=t(16),o=t.n(s),u=(t(7),t(3)),i=t(5),l=t(4),d=t.n(l),j="/http://localhost:3001/persons",b=function(){var e=d.a.get(j);return console.log(e),e.then((function(e){return e.data}))},h=function(e){return d.a.post(j,e).then((function(e){return e.data}))},m=function(e,n){return d.a.put("".concat(j,"/").concat(e),n).then((function(e){return e.data}))},f=function(e){return d.a.delete("".concat(j,"/").concat(e)).then((function(e){return e.data}))},O=function(e){return null===e.m.message?null:"success"===e.m.category?Object(c.jsx)("div",{className:"success",children:e.m.message}):Object(c.jsx)("div",{className:"error",children:e.m.message})},g=function(e){return Object(c.jsxs)("div",{children:["filter shown with"," ",Object(c.jsx)("input",{value:e.showResults,onChange:e.filterChange})]})},v=function(e){return Object(c.jsx)("div",{children:Object(c.jsxs)("form",{onSubmit:e.addDetails,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.newName,onChange:e.handleChange})," ",Object(c.jsx)("br",{}),"number:"," ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})})},x=function(e){var n=e.persons;e.showResults&&(n=e.persons.filter((function(n){return n.name.toLowerCase().includes(e.showResults.toLowerCase())})));return Object(c.jsx)("ul",{children:n.map((function(n){return Object(c.jsxs)("li",{children:[" ",n.name," ",n.number," ",Object(c.jsx)("button",{onClick:function(){return e.deleteP(n.id)},children:"delete"})]},n.name)}))})},p=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],r=n[1];Object(a.useEffect)((function(){b().then((function(e){r(e)}))}),[]);var s=Object(a.useState)(""),o=Object(i.a)(s,2),l=o[0],d=o[1],j=Object(a.useState)(""),p=Object(i.a)(j,2),w=p[0],C=p[1],y=Object(a.useState)(""),N=Object(i.a)(y,2),k=N[0],S=N[1],R=Object(a.useState)({message:null,category:null}),D=Object(i.a)(R,2),T=D[0],A=D[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(O,{m:T}),Object(c.jsx)(g,{showResults:k,filterChange:function(e){S(e.target.value)}}),Object(c.jsx)("h2",{children:"Add new"}),Object(c.jsx)(v,{addDetails:function(e){if(e.preventDefault(),t.findIndex((function(e){return e.name===l}))>-1){if(window.confirm(l+" is already added phonebook, replace the old number with new one?")){var n=t.find((function(e){return e.name===l})).id,c={name:l,number:w};m(n,c).then((function(e){var c={message:"Added ".concat(e.name),category:"success"};A(c),setTimeout((function(){A(Object(u.a)(Object(u.a)({},T),{},{message:null}))}),5e3);var a=t.map((function(t){return t.id!==n?t:e}));r(a)})).catch((function(e){var n={message:"".concat(c.name," has already been removed from the database "),category:"error"};A(n),setTimeout((function(){A(Object(u.a)(Object(u.a)({},T),{},{message:null}))}),5e3)}))}}else h({name:l,number:w}).then((function(e){var n={message:"Added ".concat(e.name),category:"success"};A(n),setTimeout((function(){A(Object(u.a)(Object(u.a)({},T),{},{message:null}))}),5e3),r(t.concat(e)),d(""),C("")})).catch((function(e){var n={message:e.response.data.error,category:"error"};A(n),setTimeout((function(){A(Object(u.a)(Object(u.a)({},T),{},{message:null}))}),5e3)}))},newName:l,handleChange:function(e){d(e.target.value)},newNumber:w,handleNumberChange:function(e){C(e.target.value)}}),Object(c.jsx)("h2",{children:"Number"}),Object(c.jsx)(x,{persons:t,showResults:k,deleteP:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Delete ".concat(n.name," ?"))&&f(e).then((function(n){r(t.filter((function(n){return n.id!==e})))}))}})]})};o.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root"))},7:function(e,n,t){}},[[40,1,2]]]);
//# sourceMappingURL=main.b2a3ecfe.chunk.js.map